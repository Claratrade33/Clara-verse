<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Painel de Operações • ClaraVerse</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='dashboard.js') }}" defer></script>
</head>
<body class="painel-page">

    <header class="topbar">
        <img src="{{ url_for('static', filename='logo_claraverse.png') }}" alt="Logo" class="logo-topo">
        <h1>ClaraVerse • Painel de Operações</h1>
        <a href="/logout" class="logout">Sair</a>
    </header>

    <div class="painel-container">
        <aside class="sidebar">
            <button onclick="executarAcao('entrada')">🟢 Entrada</button>
            <button onclick="executarAcao('stop')">🔴 Stop</button>
            <button onclick="executarAcao('alvo')">🎯 Alvo</button>
            <button onclick="alternarConfiguracoes()">⚙️ Configurar</button>
            <button onclick="ativarAutomatico()">🤖 Automático</button>
        </aside>

        <main class="painel-principal">
            <section class="grafico-section">
                <iframe 
                    src="https://www.tradingview.com/widgetembed/?symbol=BINANCE:BTCUSDT&theme=dark"
                    frameborder="0"
                    width="100%"
                    height="500px"
                    allowtransparency="true"
                    scrolling="no">
                </iframe>
            </section>

            <section class="status-section">
                <div id="status-operacao">Status: aguardando comando...</div>
                <div id="dados-mercado">
                    <span>Preço: <strong id="preco">--</strong></span> |
                    <span>Variação: <strong id="variacao">--</strong>%</span> |
                    <span>Volume: <strong id="volume">--</strong></span>
                </div>
            </section>

            <section class="configuracoes-section" id="configuracoes" style="display: none;">
                <h3>🔐 Configurar Chaves de API</h3>
                <label>Binance API Key:</label>
                <input type="text" id="binance_api_key" value="{{ chaves.binance_api_key }}">
                <label>Binance API Secret:</label>
                <input type="text" id="binance_api_secret" value="{{ chaves.binance_api_secret }}">
                <label>OpenAI API Key:</label>
                <input type="text" id="openai_api_key" value="{{ chaves.openai_api_key }}">
                <button onclick="salvarChaves()">Salvar e Conectar</button>
                <p id="mensagem-config"></p>
            </section>
        </main>
    </div>

</body>
</html>