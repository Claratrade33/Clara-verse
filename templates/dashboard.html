document.addEventListener("DOMContentLoaded", function () {
  buscarDados();

  setInterval(buscarDados, 10000); // Atualiza a cada 10 segundos
});

function buscarDados() {
  fetch("/dados_mercado")
    .then(response => response.json())
    .then(data => {
      document.getElementById("preco").textContent = data.preco;
      document.getElementById("variacao").textContent = data.variacao;
      document.getElementById("volume").textContent = data.volume;
      document.getElementById("rsi").textContent = data.rsi;
      document.getElementById("suporte").textContent = data.suporte;
      document.getElementById("resistencia").textContent = data.resistencia;
      document.getElementById("sugestao").textContent = data.sugestao;
    });
}

function enviarAcao(acao) {
  fetch(`/executar/${acao}`, { method: "POST" })
    .then(response => response.json())
    .then(data => {
      const status = document.getElementById("mensagemStatus");
      status.textContent = data.mensagem;
      status.classList.add("ativo");
      setTimeout(() => status.classList.remove("ativo"), 3000);
    });
}